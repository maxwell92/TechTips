Bootstrap--系统启动
=================
计算机系统启动的过程，从上电，到自检，到引导操作系统至完成，实现了对计算机控制权的转移的过程。

启动的过程完成了三件事：
* 加载*部分*操作系统代码到内存 
* 初始化内核数据结构（只有静态吧？）
* 控制权的转移


### BIOS时代
RAM是随机读写存储器，常称为主存或内存。它的特点是造价较昂贵且空间略小，读写速度快但是断电后数据即丢失。书上说“加电的那一刻RAM芯片里包含的是随机数据”。这里有个问题，断电后RAM不是数据丢失了？数据是清零了还是变成了无法预测的数据？为什么在加电的时候数据会是随机的？

开始启动之后，会给CPU的一个引脚加电置RESET信号，它会初始化CPU的寄存器，比如CS和EIP。CS和EIP寄存器分别是什么？

接着会将物理地址为0xfffffff0处的程序装入ROM（即平常所说的BIOS程序），然后完成硬件设备的初始化。这是什么存储器的物理地址？为什么是这个地址？

实模式下执行完BIOS，然后到保护模式，为各个硬件设备提供设备驱动程序。实模式的地址为基址+偏移的形式。所以CPU在寻址的时候就不需要GDT、LDT和页表将逻辑地址（虚地址）转换为物理地址了。

BIOS做了四件事情：
* 测试计算机的硬件（加电自检：Power-On Self Test），建立几个表来描述硬件设备。
* 初始化硬件设备。这个操作阶段可以保证IRQ线和I/O端口不冲突。那么会有什么冲突？
* 搜索一个操作系统来启动。找软盘、硬盘、CD-ROM的第一个扇区（存放分区表）。
* 将第一个扇区的内容拷贝到RAM中从0x00007c00开始的位置，并执行刚才装载的代码。为什么是这个地址？

### 引导装入程序（boot loader）
它是BIOS用来将内核映像装载到RAM中需要用到的一个程序。硬盘的第一个扇区称为主引导记录（Master Boot Record，MBR）。该扇区中包括分区表和一个小程序。这个小程序被用来装载操作系统所在分区的第一个扇区。

常见的Boot Loader有LILO（LInux LOader）和GRUB（GRand Unified Bootloader）。GRUB更为先进，它可以识别多个分区中的操作系统，还可以从文件中读入部分操作系统。

